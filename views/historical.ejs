<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-VA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title> API Historical </title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" 
            crossorigin="anonymous">

    </head>

    <body>

        <h1 class="text-center"> Historical Stock </h1>

        <div class="container">

            <%  if (!find) {

                for(var i=0; i<list.length; i++){ %>

                    <table class="table table-bordered">

                        <thead class="table-dark">

                            <tr align="center">

                                <th scope="col" colspan="2"> Symbol </th>

                            </tr>

                        </thead>

                        <tbody>
                        
                            <tr align="center">

                                <td colspan="2"><%= list[i].symbol %></td>
                                
                            </tr>
                            
                        </tbody>

                        <thead class="table-dark">

                            <tr align="center">

                                <th scope="col"> Date </th>
                                <th scope="col"> Close </th>

                            </tr>

                        </thead>

                        <tbody>

                            <% for(var j=0; j<list[i].historical.length; j++){ %>

                                <tr align="center"></tr>

                                    <td align="center"> <%= list[i].historical[j].date %> </td>
                                    <td> <%= list[i].historical[j].close %> </td>

                                </tr>

                            <% } %> 

                        </tbody>

                    </table> <br>


                <% }
            }

            else {

                for(var i=0; i<list.length; i++){ 

                    if (find === list[i].symbol) { %>

                        <table class="table table-bordered">

                            <thead class="table-dark">

                                <tr align="center">

                                    <th scope="col" colspan="2"> Symbol </th>

                                </tr>

                            </thead>

                            <tbody>
                            
                                <tr align="center">

                                    <td colspan="2"><%= list[i].symbol %></td>
                                    
                                </tr>
                                
                            </tbody>

                            <thead class="table-dark">

                                <tr align="center">

                                    <th scope="col"> Date </th>
                                    <th scope="col"> Close </th>

                                </tr>

                            </thead>

                            <tbody>

                                <% for(var j=0; j<list[i].historical.length; j++){ %>

                                    <tr align="center"></tr>

                                        <td align="center"> <%= list[i].historical[j].date %> </td>
                                        <td> <%= list[i].historical[j].close %> </td>

                                    </tr>

                                <% } %> 

                            </tbody>

                        </table> <br>

                    <% }

                }

            } %>

        </div>

    </body>

</html>